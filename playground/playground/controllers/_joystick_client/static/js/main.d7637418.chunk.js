(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(t,e,n){t.exports=n(16)},16:function(t,e,n){"use strict";n.r(e);var o=n(0),r=n.n(o),c=n(8),i=n.n(c),a=n(1),l=n(2),s=n(4),u=n(3),f=n(6),h=n(5),d=n(9),m=n.n(d),p=function(t){function e(t){var n;return Object(a.a)(this,e),(n=Object(s.a)(this,Object(u.a)(e).call(this,t))).nippleRef=r.a.createRef(),n}return Object(h.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){this.manager=m.a.create({mode:"dynamic",maxNumberOfNipples:1,color:"#fff",zone:this.nippleRef.current}),this.props.listener(this.manager)}},{key:"render",value:function(){return r.a.createElement("div",{ref:this.nippleRef,style:g})}}]),e}(o.Component),g={flex:1,background:"#000",borderRadius:"12px"},b=p,v=function(t){function e(t){var n;return Object(a.a)(this,e),(n=Object(s.a)(this,Object(u.a)(e).call(this,t))).left=0,n.right=0,n.onTouchLeft=function(t){return n.onTouch(t,"left")},n.onTouchRight=function(t){return n.onTouch(t,"right")},n.onTouch=function(t,e){var o=t.target.getBoundingClientRect(),r=t.targetTouches[0],c=r.clientX,i=o.left,a=o.right;if(c>=i&&c<=a){var l=o.bottom-o.top,s=Math.max(Math.min(2*((o.top-r.clientY)/l+.5),1),-1);n[e]=s}n.props.listener({left:n.left,right:n.right})},n.onTouchEndLeft=function(){return n.onTouchEnd("left")},n.onTouchEndRight=function(){return n.onTouchEnd("right")},n.onTouchEnd=function(t){n[t]=0,n.props.listener({left:n.left,right:n.right})},n.leftRef=r.a.createRef(),n}return Object(h.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return r.a.createElement("div",{style:k},r.a.createElement("div",{onTouchStart:this.onTouchLeft,onTouchMove:this.onTouchLeft,onTouchEnd:this.onTouchEndLeft,ref:this.leftRef,style:y}),r.a.createElement("div",{onTouchStart:this.onToucRight,onTouchMove:this.onTouchRight,onTouchEnd:this.onTouchEndRight,ref:this.leftRef,style:y}))}}]),e}(o.Component),k={flex:1,display:"flex"},y={flex:1,background:"#000",borderRadius:"12px",margin:"5px"},x=v,T=function(t){var e=t.onClick,n=t.isOn,o=t.text;return r.a.createElement("button",{onClick:e,style:{flex:1,color:n?"red":"black"}},o)},E=150,O=5e3,R=[0,1,2,3];document.body.style.margin="0px";var j=function(t){function e(){var t,n;Object(a.a)(this,e);for(var o=arguments.length,r=new Array(o),c=0;c<o;c++)r[c]=arguments[c];return(n=Object(s.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(r)))).state={status:"connecting",robotId:R[0],tankControls:!0},n.left=0,n.right=0,n.sender=null,n.connecter=null,n.connect=function(){n.conn=new WebSocket("ws://"+window.location.hostname+":9000"),n.conn.onopen=function(){n.setState({status:"connected"}),clearTimeout(n.connecter),n.sender=setInterval(n.sendDirection,E)},n.conn.onclose=function(){n.setState({status:"closed"}),clearInterval(n.sender),n.connecter=setTimeout(n.connect,O)},n.conn.onerror=function(t){n.setState({status:"error"}),clearInterval(n.sender),n.connecter=setTimeout(n.connect,O)}},n.sendDirection=function(){var t=n.state.robotId,e=Object(f.a)(n),o=e.left,r=e.right;n.conn&&n.conn.send("".concat(t,":").concat(o,"|").concat(r))},n.joystickListener=function(t){t.on("move",function(t,e){if(e.angle){var o=e.angle.radian,r=Math.min(e.force,1),c=Math.sin(o),i=Math.cos(o);n.right=Math.min(.8*c-.6*i,1),n.left=Math.min(r*(.8*c+.6*i),1)}}),t.on("end",function(){n.left=0,n.right=0})},n.tankListener=function(t){var e=t.left,o=t.right;n.left=e,n.right=o},n.onRobotSelection=function(t){n.setState({robotId:t})},n.onTankControlPress=function(){n.setState({tankControls:!0})},n.onJoystickControlPress=function(){n.setState({tankControls:!1})},n}return Object(h.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){this.connect()}},{key:"render",value:function(){var t=this,e=this.state,n=e.status,o=e.robotId,c=e.tankControls;return r.a.createElement("div",{style:C},r.a.createElement("div",{style:L},R.map(function(e){return r.a.createElement(T,{onClick:function(){return t.onRobotSelection(e)},key:e,isOn:e===o,text:"Robot ".concat(e)})}),r.a.createElement(T,{onClick:this.onTankControlPress,isOn:c,text:"Tank"}),r.a.createElement(T,{onClick:this.onJoystickControlPress,isOn:!c,text:"Joystick"})),r.a.createElement("div",{style:M},"connected"===n?c?r.a.createElement(x,{listener:this.tankListener}):r.a.createElement(b,{listener:this.joystickListener}):r.a.createElement("div",{style:S},r.a.createElement("div",{style:w},n))))}}]),e}(o.Component),C={display:"flex",flexDirection:"column",position:"relative",width:"100%",height:"100vh",boxSizing:"border-box",padding:"0.5em"},w={flex:1,fontSize:12,textAlign:"center",margin:"auto"},S={flex:1,display:"flex",marginLeft:"1em",marginRight:"1em"},M={flex:1,display:"flex",flexDirection:"column",position:"relative"},L={flex:0,display:"flex",flexWrap:"wrap",margin:"0.5em",background:"#fff"},I=j;i.a.render(r.a.createElement(I,null),document.getElementById("root"))}},[[10,1,2]]]);
//# sourceMappingURL=main.d7637418.chunk.js.map